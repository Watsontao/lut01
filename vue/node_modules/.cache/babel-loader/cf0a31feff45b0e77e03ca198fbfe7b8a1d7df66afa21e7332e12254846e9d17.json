{"ast":null,"code":"export default {\n  name: 'Farmer',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      searchForm: {\n        userName: '',\n        phone: ''\n      },\n      users: [],\n      selectedIds: []\n    };\n  },\n  created() {\n    this.loadUsers();\n  },\n  methods: {\n    // 加载用户数据（支持筛选）\n    loadUsers() {\n      this.$request.get('/api/user/getAllUser', {\n        params: this.searchForm\n      }).then(res => {\n        const all = res.data || [];\n        // 只显示农工\n        this.users = all.filter(u => u.role && (u.role.toLowerCase() === 'worker' || u.role === '农民工'));\n      });\n    },\n    // 重置搜索条件\n    resetSearch() {\n      this.searchForm = {\n        userName: '',\n        phone: ''\n      };\n      this.loadUsers();\n    },\n    // 打开新增弹窗（可扩展）\n    addUser() {\n      this.$message.info(\"点击了新增农工功能（你可以绑定弹窗）\");\n      // 可扩展：this.dialogVisible = true\n    },\n\n    // 选中项变化\n    handleSelectionChange(rows) {\n      this.selectedIds = rows.map(item => item.userId);\n    },\n    // 批量删除\n    deleteBatch() {\n      this.$confirm(`是否确认删除选中的 ${this.selectedIds.length} 个用户？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$request.post('/api/user/deleteBatch', this.selectedIds).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.loadUsers();\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(() => {});\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","localStorage","getItem","searchForm","userName","phone","users","selectedIds","created","loadUsers","methods","$request","get","params","then","res","all","filter","u","role","toLowerCase","resetSearch","addUser","$message","info","handleSelectionChange","rows","map","item","userId","deleteBatch","$confirm","length","confirmButtonText","cancelButtonText","type","post","code","success","error","msg","catch"],"sources":["src/views/manager/GreenhouseList.vue"],"sourcesContent":["<template>\n  <div class=\"main-content\">\n    <!-- 顶部欢迎 -->\n    <div class=\"card\" style=\"margin-bottom: 20px; font-weight: bold; font-size: 20px;\">\n      您好，{{ user?.userName }}！欢迎使用本系统\n    </div>\n\n    <!-- 搜索区域 -->\n    <div class=\"card\" style=\"margin-bottom: 10px;\">\n\n    </div>\n\n    <!-- 表格 -->\n    <div class=\"card\">\n      <el-table :data=\"users\" border stripe style=\"width: 100%;\" @selection-change=\"handleSelectionChange\">\n\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Farmer',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      searchForm: {\n        userName: '',\n        phone: ''\n      },\n      users: [],\n      selectedIds: []\n    }\n  },\n  created() {\n    this.loadUsers()\n  },\n  methods: {\n    // 加载用户数据（支持筛选）\n    loadUsers() {\n      this.$request.get('/api/user/getAllUser', {\n        params: this.searchForm\n      }).then(res => {\n        const all = res.data || []\n        // 只显示农工\n        this.users = all.filter(u => u.role && (u.role.toLowerCase() === 'worker' || u.role === '农民工'))\n      })\n    },\n\n    // 重置搜索条件\n    resetSearch() {\n      this.searchForm = { userName: '', phone: '' }\n      this.loadUsers()\n    },\n\n    // 打开新增弹窗（可扩展）\n    addUser() {\n      this.$message.info(\"点击了新增农工功能（你可以绑定弹窗）\")\n      // 可扩展：this.dialogVisible = true\n    },\n\n    // 选中项变化\n    handleSelectionChange(rows) {\n      this.selectedIds = rows.map(item => item.userId)\n    },\n\n    // 批量删除\n    deleteBatch() {\n      this.$confirm(`是否确认删除选中的 ${this.selectedIds.length} 个用户？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$request.post('/api/user/deleteBatch', this.selectedIds).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功')\n            this.loadUsers()\n          } else {\n            this.$message.error(res.msg)\n          }\n        })\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main-content {\n  padding: 10px;\n}\n</style>\n"],"mappings":"AAsBA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,UAAA;QACAC,QAAA;QACAC,KAAA;MACA;MACAC,KAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA;IACAD,UAAA;MACA,KAAAE,QAAA,CAAAC,GAAA;QACAC,MAAA,OAAAV;MACA,GAAAW,IAAA,CAAAC,GAAA;QACA,MAAAC,GAAA,GAAAD,GAAA,CAAAlB,IAAA;QACA;QACA,KAAAS,KAAA,GAAAU,GAAA,CAAAC,MAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,IAAA,KAAAD,CAAA,CAAAC,IAAA,CAAAC,WAAA,mBAAAF,CAAA,CAAAC,IAAA;MACA;IACA;IAEA;IACAE,YAAA;MACA,KAAAlB,UAAA;QAAAC,QAAA;QAAAC,KAAA;MAAA;MACA,KAAAI,SAAA;IACA;IAEA;IACAa,QAAA;MACA,KAAAC,QAAA,CAAAC,IAAA;MACA;IACA;;IAEA;IACAC,sBAAAC,IAAA;MACA,KAAAnB,WAAA,GAAAmB,IAAA,CAAAC,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAC,MAAA;IACA;IAEA;IACAC,YAAA;MACA,KAAAC,QAAA,mBAAAxB,WAAA,CAAAyB,MAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAArB,IAAA;QACA,KAAAH,QAAA,CAAAyB,IAAA,+BAAA7B,WAAA,EAAAO,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAsB,IAAA;YACA,KAAAd,QAAA,CAAAe,OAAA;YACA,KAAA7B,SAAA;UACA;YACA,KAAAc,QAAA,CAAAgB,KAAA,CAAAxB,GAAA,CAAAyB,GAAA;UACA;QACA;MACA,GAAAC,KAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}